


// Define data matches. 
const blogdata = [

	{
		title:'Beach Life',
		postid:'beach',
		authorid:'aventura',
		imgurl:'../../gallery/assets/images/full/fd21366fc13ca502751ebb8f7d18f2dd.jpg',
		vidurl:'../../video/assets/videos/2231485.mp4',
		content:[],
		timeposted:0,
	},
	{
		title:'Metropolis',
		postid:'metropolis',
		authorid:'aventura',
		imgurl:'../../gallery/assets/images/full/b.jpeg',
		vidurl:'../../video/assets/videos/1436812.mp4',
		content:[],
		timeposted:0,
	},
	{
		title:'Green',
		postid:'green',
		authorid:'aventura',
		imgurl:'../../gallery/assets/images/full/Navagio.jpg',
		imgurl:'../../gallery/assets/images/full/2.jpg',
		vidurl:'../../video/assets/videos/0000002.mp4',
		content:[],
		timeposted:0,
	},
	{
		title:'City Life',
		postid:'citylife',
		authorid:'aventura',
		imgurl:'../../gallery/assets/images/full/city.jpg',
		vidurl:'../../video/assets/videos/1654216.mp4',
		vidurl:'../../video/assets/videos/2818546.mp4',
		content:[],
		timeposted:0,
	},
	{
		title:'Island City',
		postid:'islandcity',
		authorid:'aventura',
		imgurl:'../../gallery/assets/images/full/1.jpg',
		vidurl:'../../video/assets/videos/1436812.mp4',
		content:[],
		timeposted:0,
	},
	{
		title:'Brown',
		postid:'brown',
		authorid:'aventura',
		imgurl:'../../gallery/assets/images/full/Squarespace+Learning+-+Forum+Banner.jpg',
		vidurl:'../../video/assets/videos/0000001.mp4',
		content:[],
		timeposted:0,
	},
	{
		title:'City Buildings',
		postid:'citybuildings',
		authorid:'aventura',
		imgurl:'../../gallery/assets/images/full/Dubai.jpg',
		vidurl:'../../video/assets/videos/1654216.mp4',
		content:[],
		timeposted:0,
	},
	{
		title:'Warm Color Terrain',
		postid:'warm',
		authorid:'aventura',
		imgurl:'../../gallery/assets/images/full/2 2.jpg',
		vidurl:'../../video/assets/videos/1583096.mp4',
		content:[],
		timeposted:0,
	},

	// {
		// 	title:'xyz',
	// 	postid:'xyz',
	// 	authorid:'xyz',
	// 	imgurl:'',
	// 	vidurl:'',
	// 	content:[],
	// 	timeposted:0,
	// },

];


// Define blog post data. 
const blogdata2 = [

	{
		title:'Blog Post A',
		postid:'abc',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:1672870380000,
	},
	{
		title:'Blog Post B',
		postid:'def',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:1659561180000,
	},
	{
		title:'Blog Post C',
		postid:'ghi',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:1665004380000,
	},

	{
		title:'Blog Post D',
		postid:'jkl',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:1670451180000,
	},
	{
		title:'Blog Post E',
		postid:'mno',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:1667423580000,
	},
	{
		title:'Blog Post F',
		postid:'pqr',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:1662585180000,
	},

	{
		title:'Blog Post G',
		postid:'stu',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post H',
		postid:'vwx',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post I',
		postid:'yza',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},

	{
		title:'Blog Post J',
		postid:'bcd',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post K',
		postid:'efg',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post L',
		postid:'hij',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},

	{
		title:'Blog Post M',
		postid:'klm',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post N',
		postid:'nop',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post O',
		postid:'qrs',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},

	{
		title:'Blog Post P',
		postid:'tuv',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post Q',
		postid:'wxy',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post R',
		postid:'zab',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},

	{
		title:'Blog Post S',
		postid:'cde',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post T',
		postid:'fgh',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post U',
		postid:'ijk',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},

	{
		title:'Blog Post V',
		postid:'lmn',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post W',
		postid:'opq',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post X',
		postid:'rst',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	
	{
		title:'Blog Post Y',
		postid:'uvw',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},
	{
		title:'Blog Post Z',
		postid:'xyz',
		authorid:'',
		imgurl:'',
		vidurl:'',
		content:[],
		timeposted:0,
	},

];


/*****/


// Get saved database from storage. 
let savedDB = getDatabaseFromStorage();

// Check if database has any contents. 
let savedDBExists = !!(savedDB.length);
console.log('Saved DB:',savedDBExists);

// Generate additional random data for all blog posts. 
if(savedDBExists) generateRandomPostData();


/*****/


// Get post index by post id. 
function getPostIndexById(id) {

	// Go thru all posts. 
	for(let i in blogdata) {

		// Get current post. 
		let post = blogdata[i];

		// Return index if post found. 
		if(post.postid==id) return i;
	}

	// Return nothing if post not found. 
	return -1;
}

// Get post by id. 
function getPostById(id) {

	// Go thru all posts. 
	for(let post of blogdata) {

		// Return post if found. 
		if(post.postid==id) return post;
	}

	// Return nothing if post not found. 
	return null;
}


/*****/


// Retrieve database from storage. 
function getDatabaseFromStorage() {

	// Get from storage: string represntation of database. 
	let str = localStorage.getItem('blogdata');

	// Parse data string into array form. 
	temp = JSON.parse(str);

	// Return database. 
	return temp ? temp : [];
}

// Save database to storage. 
function saveDatabaseToStorage() {
	console.log('Saving database:',blogdata);

	// Check for empty database. 
	let isEmptyDatabase = !(blogdata.length);

	// Handle empty database. 
	if(isEmptyDatabase) {
	
		// Remove database from storage. 
		localStorage.removeItem('blogdata');
	}

	// Handle non-empty database. 
	else {

		// Create string version of database. 
		let str = JSON.stringify(blogdata);
	
		// Save to storage: string version of database. 
		localStorage.setItem('blogdata',str);
	}
	
	// Display all items in database. 
	displayDatabase();
}
