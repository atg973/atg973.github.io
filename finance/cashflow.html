
<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link href="../atgicon.ico" rel="icon"/>
		<title>Cashflow Valuation</title>

		<!-- Bootstrap 4 -->
		<!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" type="text/css"> -->
		<link href="https://import.atgserver.xyz/bs4/bootstrap.min.css" rel="stylesheet" type="text/css">
		<link href="../../import/bs4/bootstrap.min.css" rel="stylesheet" type="text/css">
		<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script> -->
		<script src="https://import.atgserver.xyz/bs4/jquery.min.js" type="text/javascript"></script>
		<script src="../../import/bs4/jquery.min.js" type="text/javascript"></script>
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" type="text/javascript"></script> -->
		<!-- <script src="https://import.atgserver.xyz/bs4/popper.min.js" type="text/javascript"></script> -->
		<!-- <script src="../../import/bs4/popper.min.js" type="text/javascript"></script> -->
		<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" type="text/javascript"></script> -->
		<script src="https://import.atgserver.xyz/bs4/bootstrap.min.js" type="text/javascript"></script>
		<script src="../../import/bs4/bootstrap.min.js" type="text/javascript"></script>

		<!-- F.A. Icons -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
		<link href="https://import.atgserver.xyz/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
		<link href="../../import/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>

		<!-- CSS Stylesheet & JavaScript code -->
		<link href="cashflow.css" rel="stylesheet" type="text/css"/>
		<script src="cashflow.js" type="text/javascript"></script>
		
		<!-- Dollar Formatting -->
		<script src="../dollar/dollar.js" type="text/javascript"></script>

		<!-- Toast -->
		<link href="../toast/toast.css" rel="stylesheet" type="text/css"/>
		<script src="../toast/toast.js" type="text/javascript"></script>
	</head>

	<body>

		<!-- container -->
		<div id="container" class="container-fluid">

			<!-- head-row -->
			<div class="head-row row">

				<div class="col-sm-12">
					<h2>
						<img src="../atgicon.ico">
						Cashflow Valuation
					</h2>
				</div>

				<!-- col-sm-12 col-md-10 col-md-offset-1 -->
				<div class="col-sm-12">
					<!-- tableContainer -->
					<div class="container-fluid">
						<!-- row -->
						<div class="row">
							<div class="col-sm-12">
								<h5>
									DCF Valuation Formula
								</h5>
							</div>
							<div class="col-sm-12">
								<a href="https://www.investopedia.com/terms/v/valuation.asp" target="_blank">Intrinsic value</a> &nbsp;=&nbsp; the sum of all future cashflows, each <a href="https://www.investopedia.com/terms/d/dcf.asp" target="_blank">discounted</a> to <a href="https://www.investopedia.com/terms/t/timevalueofmoney.asp" target="_blank">present value</a>
							</div>

							<div class="col-sm-12">
								<p class="formula main">
									<span class="identifier">
										<strong class="d-inline-block d-sm-none">Net Present Value</strong>
										<strong class="d-none d-sm-inline-block">Net Present<br>Value</strong>
									</span>
									<span class="equals">
										<span class="d-block d-sm-none"></span>
										<span class="d-none d-sm-inline-block">&nbsp;=</span>
									</span>
									<span class="cfFigure"></span>
									<span class="bracket bracketOpen">
										<span></span>
									</span> 
									<span class="cfFigure cfFigure0">
										<strong>CF<sub>0</sub></strong>
									</span>
									<span class="plus">+</span>
									<span class="cfFigure">
										<strong>CF<sub>1</sub></strong><span class="discounter">(1+r)</span>
									</span> 
									<span class="plus">+</span>
									<span class="cfFigure">
										<strong>CF<sub>2</sub></strong><span class="discounter">(1+r)<sup>2</sup></span>
									</span>
									<span class="plus">
										+ <span class="ellipsis">...</span> +
									</span>
									<span class="cfFigure">
										<strong>CF<sub>n-1</sub></strong><span class="discounter">(1+r)<sup>n-1</sup></span>
									</span>
									<span class="plus">+</span>
									<span class="cfFigure">
										<strong>CF<sub>n</sub></strong><span class="discounter">(1+r)<sup>n</sup></span>
									</span>
									<span class="bracket bracketClose">
										<span></span>
									</span>
									<span class="cfFigure"></span>
									<span class="plus">+</span>
									<span class="cfFigure">
										<strong>PTV<sub>n</sub></strong><span class="discounter">(1+r)<sup>n</sup></span>
									</span>
								</p>
								
							</div>

							<div class="col-sm-6">
								<p class="formula">
									<span class="d-none d-sm-block">&nbsp;</span>
									<strong>CF<sub>n</sub></strong>
									<span class="formulaLabel" style="margin-top:0;">Projected cashflow <i>n</i> year(s) from now</span>
								</p>
							</div>
							<div class="col-sm-6">
								<p class="formula">
									<strong>PTV<sub>n</sub></strong> = 
									<span class="cfFigure">
										<strong>CF<sub>n</sub></strong> 
										<span>(1+g)</span>
										<span class="discounter">(r&minus;g)</span>
									</span>
									
									<span class="formulaLabel">Terminal value <i>n</i> year(s) from now</span>
								</p>
							</div>

							<!-- <div class="col-sm-6">
								<strong>g</strong>: terminal rate of growth
							</div>
							<div class="col-sm-6">
								<strong>r</strong>: discount rate <span style="display:none;">(opportunity cost of capital)</span>
							</div> -->
						</div>
						<!-- /row -->
					</div>
					<!-- /tableContainer -->
				</div>

			</div>
			<!-- /head-row -->


			<!-- row -->
			<div class="row">
				<div class="col-sm-12">
					<div class="container-fluid">

						<!-- input-row -->
						<div class="input-row row">
							<div class="col-7">
								<label for="discountRate">
									Discount Rate <span class="d-none d-sm-inline-block">(r)</span>
								</label>
							</div>
							<div class="col-5">
								<input type="number" id="discountRate" class="percent" placeholder="2.0" min="1" max="100" step=".01">
							</div>
							<div class="col-7 ptvSection">
								<label for="growthRate">
									Terminal Growth Rate <span class="d-none d-sm-inline-block">(g)</span>
								</label>
							</div>
							<div class="col-5 ptvSection">
								<input type="number" id="growthRate" class="percent" placeholder="1.0" min="0" max="100" step=".01"/>
							</div>
						</div>
						<!-- /input-row -->
						
					</div>
				</div>
			</div>
			<!-- /row -->


			<!-- row -->
			<div class="row">
				<div class="col-sm-12">

					<!-- #cfInput -->
					<div id="cfInput" class="container-fluid">

						<!-- head-row -->
						<div class="head-row row">
							<div class="col-3 col-sm-3">
								<div class="inputColHead">Period</div>
							</div>
							<div class="col-4 col-sm-3">
								<div class="inputColHead">Cashflow</div>
							</div>
							<div class="col-5 col-sm-3">
								<div class="inputColHead">Discounted</div>
							</div>
							<div class="col-4 col-sm-3 d-none d-sm-block">
								<div class="inputColHead">Net PV</div>
							</div>
						</div>
						<!-- /head-row -->

						<!-- input-row -->
						<div id="s0" class="input-row row">
							<div class="col-3 col-sm-3">
								<label for="cf0" class="cfLabel">Now</label>
							</div>
							<div class="col-4 col-sm-3">
								<input type="number" id="cf0" class="cf" placeholder="0">
							</div>
							<div class="col-5 col-sm-3">
								<div id="dcf0" class="dcf">&nbsp;</div>
							</div>
							<div class="col-4 col-sm-3 d-none d-sm-block">
								<div id="npv0" class="npv">&nbsp;</div>
							</div>
						</div>
						<!-- /input-row -->

						<!-- input-row -->
						<div id="s1" class="input-row row dynamic">
							<div class="col-3 col-sm-3">
								<label for="cf1" class="cfLabel">
									<div class="d-block d-sm-none">Yr 1</div>
									<div class="d-none d-sm-block">Year 1</div>
								</label>
							</div>
							<div class="col-4 col-sm-3">
								<input type="number" id="cf1" class="cf" placeholder="1000" step=".01">
							</div>
							<div class="col-5 col-sm-3">
								<div id="dcf1" class="dcf">&nbsp;</div>
							</div>
							<div class="col-4 col-sm-3 d-none d-sm-block">
								<div id="npv1" class="npv">&nbsp;</div>
							</div>
						</div>
						<!-- /input-row -->

						<!-- input-row -->
						<div id="s2" class="input-row row dynamic">
							<div class="col-3 col-sm-3">
								<label for="cf2" class="cfLabel">
									<div class="d-block d-sm-none">Yr 2</div>
									<div class="d-none d-sm-block">Year 2</div>
								</label>
							</div>
							<div class="col-4 col-sm-3">
								<input type="number" id="cf2" class="cf" placeholder="1000" step=".01">
							</div>
							<div class="col-5 col-sm-3">
								<div id="dcf2" class="dcf">&nbsp;</div>
							</div>
							<div class="col-4 col-sm-3 d-none d-sm-block">
								<div id="npv2" class="npv">&nbsp;</div>
							</div>
						</div>
						<!-- /input-row -->

						<!-- input-row -->
						<div id="s3" class="input-row row dynamic">
							<div class="col-3 col-sm-3">
								<label for="cf3" class="cfLabel">
									<div class="d-block d-sm-none">Yr 3</div>
									<div class="d-none d-sm-block">Year 3</div>
								</label>
							</div>
							<div class="col-4 col-sm-3">
								<input type="number" id="cf3" class="cf" placeholder="1000" step=".01">
							</div>
							<div class="col-5 col-sm-3">
								<div id="dcf3" class="dcf">&nbsp;</div>
							</div>
							<div class="col-4 col-sm-3 d-none d-sm-block">
								<div id="npv3" class="npv">&nbsp;</div>
							</div>
						</div>
						<!-- /input-row -->

						<!-- input-row -->
						<div id="sptv" class="input-row row ptvSection">
							<div class="col-3 col-sm-3">
								<label for="ptv" class="cfLabel">
									PTV
									<button class="calcPTV" onclick="calcPTV();">
										<i class="fa fa-calculator"></i>
									</button>
								</label>
							</div>
							<div class="col-4 col-sm-3">
								<input type="number" id="ptv" class="cf" placeholder="64000" step=".01">
							</div>
							<div class="col-5 col-sm-3">
								<div id="dptv" class="dcf">&nbsp;</div>
							</div>
							<div class="col-4 col-sm-3 d-none d-sm-block">
								<div id="npvf" class="npv">&nbsp;</div>
							</div>
						</div>
						<!-- /input-row -->

						<!-- input-row -->
						<div class="input-row row">
							<div class="col-12">

								<div style="position:relative;">
									<input type="checkbox" id="usePTV" onclick="toggleUsePTV();" style="" checked />
									<label for="usePTV" style="width:auto; text-align:center;">
										<div class="d-none d-sm-block">Terminal Value</div>
										<div class="d-block d-sm-none">PTV</div>
									</label>
								</div>
								<div>
									<button class="delta1" onclick="decrYears();">&minus;</button>
									<button class="delta1" onclick="incrYears();">&plus;</button>
								</div>

							</div>
							<!-- <div class="col-sm-12">&nbsp;</div> -->
						</div>
						<!-- /input-row -->

						<!-- input-row -->
						<div class="input-row row" style="display:none;">
							<div class="col-4 col-sm-3">
								<label for="numYears">Projection Periods</label>
							</div>
							<div class="col-4 col-sm-3">
								<input id="numYears" type="number" value="3" min="0" max="5"/>
							</div>
							<div class="col-4 col-sm-3">
								<button id="setYears" onclick="setNumYears();">Set</button>
							</div>
						</div>
						<!-- /input-row -->

					</div>
					<!-- /#cfInput -->

				</div>
			</div>
			<!-- /row -->

			<!-- output-row -->
			<!-- <div class="output-row row"> -->
			<div class="row" style="display:none;">
				<div class="col-sm-12 col-md-8 col-md-offset-2">
					<div id="output" class="row"></div>
				</div>
			</div>
			<!-- /output-row -->

			<!-- button-row -->
			<div class="button-row row">
				<div class="col-4">
					<button type="button" onclick="onClear();">Clear</button>
				</div>
				<div class="col-4">
					<button id="submitBtn" type="button" onclick="onSubmit();">Submit</button>
				</div>
				<div class="col-4">
					<button type="button" onclick="setDefault(); onSubmit();">Example</button>
				</div>
			</div>
			<!-- /button-row -->

			<!-- output-row -->
			<div class="output-row row">

				<div class="col-sm-12">

					<!-- tableContainer -->
					<div class="container-fluid">

						<!-- output-row -->
						<div class="row">
							<div class="col-5">
								<label for="NPV">
									<!-- Asset Value -->
									<div>Net Present Value</div>
								</label>
							</div>
							<div class="col-7">
								<div id="NPV" class="result">&nbsp;</div>
							</div>
						</div>
						<!-- /output-row -->

						<!-- output-row -->
						<div class="row" style="display:none;">
							<div class="col-5">
								<label for="equityValue">
									<div>Estimated Equity Value</div>
								</label>
							</div>
							<div class="col-7">
								<div id="equityValue" class="result">&nbsp;</div>
							</div>
						</div>
						<!-- /output-row -->

						<!-- output-row -->
						<div class="row" style="display:none;">
							<div class="col-5">
								<label for="shareValue">
									<div>Estimated Share Value</div>
								</label>
							</div>
							<div class="col-7">
								<div id="shareValue" class="result">&nbsp;</div>
							</div>
						</div>
						<!-- /output-row -->

						<!-- output-row -->
						<div class="row">
							<div class="col-5">
								<label for="safePrice">
									<div>Safe To Pay</div>
								</label>
							</div>
							<div class="col-7">
								<div id="safePrice" class="result">&nbsp;</div>
							</div>
						</div>
						<!-- /output-row -->

					</div>
					<!-- /tableContainer -->

				</div>

				<div class="col-sm-12" id="parameters">

					<!-- tableContainer -->
					<div class="container-fluid">

						<!-- input-row -->
						<div class="input-row row">
							<div class="col-7">
								<label for="debtAmount">Amount of Debt</label>
							</div>
							<div class="col-5">
								<input type="number" id="debtAmount" class="dollar" placeholder="0" value="0" min="0" max="999999999999" oninput="onSubmit();">
							</div>
						</div>
						<!-- /input-row -->

						<!-- input-row -->
						<div class="input-row row">
							<div class="col-7">
								<label for="numShares">Number of Shares</label>
							</div>
							<div class="col-5">
								<input type="number" id="numShares" class="dollar" placeholder="1" value="1" min="1" max="999999999999" oninput="onSubmit();">
							</div>
						</div>
						<!-- /input-row -->

						<!-- input-row -->
						<div class="input-row row">
							<div class="col-7">
								<label for="marginOfSafety">Margin of Safety (%)</label>
							</div>
							<div class="col-5">
								<input type="number" id="marginOfSafety" class="dollar" placeholder="33" value="33" min="0" max="100" oninput="onSubmit();">
							</div>
						</div>
						<!-- /input-row -->

					</div>
					<!-- /tableContainer -->
					
				</div>

			</div>
			<!-- /output-row -->


		</div>
		<!-- /container -->


		<!--table style="margin-top:32px;" cellpadding="3" border="3" align="center">
			<tr><td>
				<strong>Capital Asset Pricing Model</strong>
				<br/><br/>
				r<sub>a</sub> = r<sub>f</sub> + &beta;<sub>a</sub>(r<sub>m</sub> - r<sub>f</sub>)
				<ul>
				r<sub>f</sub> = Risk free rate<br/>
				&beta;<sub>a</sub> = Beta of the security (volatility)<br/>
				r<sub>m</sub> = Expected market return<br/>
				</ul>
			</td></tr>
		</table-->

		<script type="text/javascript">
			$(document).ready(function(){
				$('#usePTV').click();
			});

			var inputs = document.getElementsByTagName('input');
			var input;

			for (var i=0 ; i < inputs.length ; i++) {
				input = inputs[i];
				
				input.addEventListener("keyup", function(event) {
					event.preventDefault();
					if (event.keyCode === 13) {
						document.getElementById("submitBtn").click();
					}
				});
			}
		</script>

	</body>

</html>

